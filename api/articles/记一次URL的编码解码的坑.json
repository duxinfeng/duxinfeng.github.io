{"title":"记一次URL的编码解码的坑","uid":"7875f6a742b6437f6315449724e52f10","slug":"记一次URL的编码解码的坑","date":"2020-02-17T13:17:08.000Z","updated":"2020-03-11T13:20:11.000Z","comments":true,"path":"api/articles/记一次URL的编码解码的坑.json","keywords":null,"cover":null,"content":"<p>由于服务器端返回的音频资源链接带中文字符，所以在播放这个资源文件的时候，需要对URL进行一次编码。但是由于资源并不一定严格标准，有的编码有的没有编码。所以客户端在拿到这个资源文件的时候，无法播放。对于这种情况，需要先对资源进行解码，然后再进行编码，再进行播放。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">NSString *URLString &#x3D; [url stringByRemovingPercentEncoding];\nURLString &#x3D; [URLString stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]];<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n","text":"由于服务器端返回的音频资源链接带中文字符，所以在播放这个资源文件的时候，需要对URL进行一次编码。但是由于资源并不一定严格标准，有的编码有的没有编码。所以客户端在拿到这个资源文件的时候，无法播放。对于这种情况，需要先对资源进行解码，然后再进行编码，再进行播放。 NSString ...","link":"","photos":[],"count_time":{"symbolsCount":324,"symbolsTime":"1 mins."},"categories":[{"name":"iOS","slug":"iOS","count":36,"path":"api/categories/iOS.json"}],"tags":[{"name":"NSURL","slug":"NSURL","count":2,"path":"api/tags/NSURL.json"}],"toc":"","author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"2019年终总结","uid":"ef8c4d25d73a4a237defe4a6e37dd6b1","slug":"2019年终总结","date":"2020-02-22T07:41:48.000Z","updated":"2020-02-22T13:22:56.000Z","comments":true,"path":"api/articles/2019年终总结.json","keywords":null,"cover":"http://qiniu.niuxtech.cn/2020/202002222036.jpeg","text":"前言尽管是2020年前提前了一周把标题写了，作为重度拖延症患者，顺利的把这篇总结拖到现在才完成。 年终总结没写过几次，每到一年的最后一天看大家都在朋友圈发自己的年终总结和新年愿望的时候，自己也想总结记录一下，发现这一年平平淡淡，没有什么有成就感的事情，也就没啥好写的。新的一年也没...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"碎碎念","slug":"碎碎念","count":13,"path":"api/categories/碎碎念.json"}],"tags":[{"name":"年终总结","slug":"年终总结","count":1,"path":"api/tags/年终总结.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}},"next_post":{"title":"碎碎念在2019年11月","uid":"d3316f29d26cdb607821f366ad20f8ec","slug":"碎碎念在2019年11月","date":"2019-11-28T11:11:40.000Z","updated":"2020-03-11T14:43:21.000Z","comments":true,"path":"api/articles/碎碎念在2019年11月.json","keywords":null,"cover":null,"text":"周一妈妈生日，请了两天假去南京给她过生，做了两件事: 去鼓楼医院给他们做了一个体检，大概计划了两三年的，终于在威逼利诱下，他们同意休一天 带我妈去看牙 体检的时候有个阴超，医生给她说子宫脱落。大概在生我的时候s出现的问题，那个时候家里穷， 路上，妈妈感叹年轻的来南京打工的时候，牙...","link":"","photos":[],"count_time":{"symbolsCount":247,"symbolsTime":"1 mins."},"categories":[{"name":"碎碎念","slug":"碎碎念","count":13,"path":"api/categories/碎碎念.json"}],"tags":[],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}}}