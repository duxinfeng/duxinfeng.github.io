{"title":"UShare 分享文件到微信","uid":"7125dedc020c30b44e6a9c6092404482","slug":"UShare-分享文件到微信","date":"2022-03-11T10:54:02.000Z","updated":"2022-05-13T14:15:01.082Z","comments":true,"path":"api/articles/UShare-分享文件到微信.json","keywords":null,"cover":"http://qiniu.niuxtech.cn/2022/blog_placeholder_010.jpg","content":"<p>看到友盟社区一个帖子，说友盟分享文档没有分享文件的示例或说明，然后去看了SDK提供的接口，写了一些示例。</p>\n<p><a href=\"https://community.umeng.com/topic/view/622ae087fb24130bf76d0e0a\">https://community.umeng.com/topic/view/622ae087fb24130bf76d0e0a</a></p>\n<pre class=\"line-numbers language-objective-c\" data-language=\"objective-c\"><code class=\"language-objective-c\">UMShareFileObject *fileObject &#x3D; [UMShareFileObject shareObjectWithTitle:@&quot;分享的PDF名称.pdf&quot; descr:@&quot;不用写，写了也不显示&quot; thumImage:nil];\nfileObject.fileData &#x3D; [NSData dataWithContentsOfURL:路径或地址]; &#x2F;&#x2F; 如果无法打开微信检查这里的fileData 是否位nil\n\nUMSocialMessageObject *messageObject &#x3D; [UMSocialMessageObject messageObjectWithMediaObject:fileObject];\n\n[[UMSocialManager defaultManager] shareToPlatform:UMSocialPlatformType_WechatSession messageObject:messageObject currentViewController:self completion:^(id result, NSError *error) &#123;\n if (!error) &#123;\n  NSLog(@&quot;result -&gt; %@&quot;,result);\n &#125;\n&#125;];<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p>微信SDK暴露的接口</p>\n<pre class=\"line-numbers language-objective-c\" data-language=\"objective-c\"><code class=\"language-objective-c\">\n@interface WXFileObject : NSObject\n\n&#x2F;*! @brief 返回一个WXFileObject对象\n *\n * @note 返回的WXFileObject对象是自动释放的\n *&#x2F;\n+ (WXFileObject *)object;\n\n&#x2F;** 文件后缀名\n * @note 长度不超过64字节\n *&#x2F;\n@property (nonatomic, copy) NSString *fileExtension;\n\n&#x2F;** 文件真实数据内容\n * @note 大小不能超过10M\n *&#x2F;\n@property (nonatomic, strong) NSData *fileData;\n\n@end<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p>友盟分享的接口</p>\n<pre class=\"line-numbers language-objective-c\" data-language=\"objective-c\"><code class=\"language-objective-c\">@interface UMShareFileObject : UMShareObject\n\n&#x2F;** 文件后缀名\n * @note 长度不超过64字节\n *&#x2F;\n@property (nonatomic, retain) NSString  *fileExtension;\n\n&#x2F;** 文件真实数据内容\n * @note 大小不能超过10M\n *&#x2F;\n@property (nonatomic, retain) NSData    *fileData;\n\n&#x2F;** 文件的名字(不包含后缀)\n * @note 长度不超过64字节\n *&#x2F;\n@property (nonatomic, retain) NSString  *fileName;\n\n@end<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p>实际操作结果发现 <code>UMShareFileObject</code>的 fileExtension和fileName 是可以不传的，但是在构造初始化UMShareFileObject的时候，title字段一定要带后缀，否则分享到微信文件会是一个问号，不能直接打开。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">UMShareFileObject *fileObject &#x3D; [UMShareFileObject shareObjectWithTitle:@&quot;分享的PDF名称.pdf&quot; descr:@&quot;不用写，写了也不显示&quot; thumImage:nil];<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n\n\n<p>其实使用系统<code>UIActivityViewController</code>分享还是最香的。</p>\n","text":"看到友盟社区一个帖子，说友盟分享文档没有分享文件的示例或说明，然后去看了SDK提供的接口，写了一些示例。 https://community.umeng.com/topic/view/622ae087fb24130bf76d0e0a UMShareFileObject *file...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"友盟分享","slug":"友盟分享","count":1,"path":"api/tags/友盟分享.json"}],"toc":"","author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":" 假设链表中每一个节点的值都在 0 - 9 之间，那么链表整体就可以代表一个整数。","date":"2022-04-22T15:06:51.933Z","updated":"2022-04-22T15:06:51.933Z","comments":true,"path":"api/articles/ 假设链表中每一个节点的值都在 0 - 9 之间，那么链表整体就可以代表一个整数。.json","keywords":null,"cover":null,"text":"/ 假设链表中每一个节点的值都在 0 - 9 之间，那么链表整体就可以代表一个整数。// 给定两个这种链表，请生成代表两个整数相加值的结果链表。// 例如：链表 1 为 9-&gt;3-&gt;7，链表 2 为 6-&gt;3，最后生成新的结果链表为 1-&gt;0-&gt;0-...","link":"","photos":[],"count_time":{"symbolsCount":452,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}},"next_post":{"title":"Flutter Color.fromARGB","uid":"40c0a1e114dfe520681211a05fd98f37","slug":"Flutter-Color-fromARGB","date":"2021-12-30T08:40:03.000Z","updated":"2022-09-01T05:38:27.037Z","comments":true,"path":"api/articles/Flutter-Color-fromARGB.json","keywords":null,"cover":"http://qiniu.niuxtech.cn/2022/blog_placeholder_009.jpg","text":"iOS 上对应的RGBA [UIColor colorWithRed: green: blue: alpha: ],RGB 0255 之前的值 A 01之间的值。对应Flutter 的 Color.fromRGBO 。 Flutter 上对应ARGB , Color.fromAR...","link":"","photos":[],"count_time":{"symbolsCount":617,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Flutter","slug":"Flutter","count":6,"path":"api/tags/Flutter.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}}}