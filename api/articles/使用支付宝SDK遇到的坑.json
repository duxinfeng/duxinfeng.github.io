{"title":"使用支付宝SDK遇到的坑","uid":"1e386e367706b20ddfe4d4224e6c28d8","slug":"使用支付宝SDK遇到的坑","date":"2015-12-15T06:20:05.000Z","updated":"2017-04-27T13:10:49.000Z","comments":true,"path":"api/articles/使用支付宝SDK遇到的坑.json","keywords":null,"cover":[],"content":"<h3 id=\"搜索SDK坑\"><a href=\"#搜索SDK坑\" class=\"headerlink\" title=\"搜索SDK坑\"></a>搜索SDK坑</h3><p>有可能是我搜索姿势不对，但是在网上看到很童鞋吐槽支付宝SDK藏得太深很不好找。</p>\n<p>和很多童鞋一样在Google/Baidu搜索框输入<code>支付宝SDK</code>,然后第一条结果<a href=\"https://openhome.alipay.com/doc/docIndex.htm?url=https://openhome.alipay.com/doc/viewKbDoc.htm?key=236698_261849&amp;type=info\">https://openhome.alipay.com/doc/docIndex.htm?url=https://openhome.alipay.com/doc/viewKbDoc.htm?key=236698_261849&amp;type=info</a>(Baidu要忽略掉前面推广部分的第一条)，然后点到SDK下载跳到：<br><img src=\"http://7xj2sw.com1.z0.glb.clouddn.com/QQ20151215-0.png\" width=\"80%\" height=\"80%\" alt=\"\"/></p>\n<p>纳尼？版本2.0最新更新日期2013-10-10，好歹也是大公司，不科学啊,果然下载下来的SDK也不正确。。。</p>\n<p>然后在网上扒扒扒。。。</p>\n<h3 id=\"找到坑的原因\"><a href=\"#找到坑的原因\" class=\"headerlink\" title=\"找到坑的原因\"></a>找到坑的原因</h3><p>原来关键词输入错误，应该搜索<code>支付宝开放平台</code>（<a href=\"http://doc.open.alipay.com/doc2/alipayDocIndex.htm\">http://doc.open.alipay.com/doc2/alipayDocIndex.htm</a>。</p>\n<p>或者在搜索支付宝SDK出来页面的时候,点击导航栏跳转一下就好。</p>\n<!--<http://7xj2sw.com1.z0.glb.clouddn.com/QQ20151215-1.png>-->\n<img src=\"http://7xj2sw.com1.z0.glb.clouddn.com/QQ20151215-1.png\" width=\"80%\" height=\"80%\" alt=\"\"/>\n\n<h3 id=\"下载坑\"><a href=\"#下载坑\" class=\"headerlink\" title=\"下载坑\"></a>下载坑</h3><p>不知道是什么原因，在网页上下载完，但是一直是这个状态,应该是解压打不开。最后用的迅雷。<br><a href=\"http://7xj2sw.com1.z0.glb.clouddn.com/QQ20151215-2.png\">http://7xj2sw.com1.z0.glb.clouddn.com/QQ20151215-2.png</a><br><img src=\"http://7xj2sw.com1.z0.glb.clouddn.com/QQ20151215-2.png\" width=\"80%\" height=\"80%\" alt=\"\"/></p>\n<h3 id=\"支付宝支付坑\"><a href=\"#支付宝支付坑\" class=\"headerlink\" title=\"支付宝支付坑\"></a>支付宝支付坑</h3><p>文档里建议：“出于安全考虑，请商户尽量把私钥保存在服务端，在服务端进行签名验签。”，所以客户单在本地拿到订单信息之后进行字符串拼接，然后给丢到支付宝SDK中,等待处理结果。</p>\n<pre><code> [[AlipaySDK defaultService] payOrder:orderString fromScheme:appScheme callback:^(NSDictionary *resultDic) &#123;\n        NSLog(@&quot;reslut = %@&quot;,resultDic);\n    &#125;];\n</code></pre>\n<h3 id=\"注意坑\"><a href=\"#注意坑\" class=\"headerlink\" title=\"注意坑\"></a>注意坑</h3><ul>\n<li>如果出现6001错误（用户中途取消），请检查订单在做拼接时候是否符合规则。参数需要有“双引号”包起来，因为这个也排查好一会儿才找到错误原因。</li>\n<li>运行Demo前，需要作为商户到 <a href=\"https://b.alipay.com/\">https://b.alipay.com</a> 进行签约与审核，才能拿到 <code>partner</code>、<code>seller</code>、<code>privateKey</code> 信息，demo中参数配置在<code>APViewController.m</code>文件里。</li>\n</ul>\n","text":"搜索SDK坑有可能是我搜索姿势不对，但是在网上看到很童鞋吐槽支付宝SDK藏得太深很不好找。 和很多童鞋一样在Google/Baidu搜索框输入支付宝SDK,然后第一条结果https://openhome.alipay.com/doc/docIndex.htm?url=https:...","link":"","photos":[],"count_time":{"symbolsCount":993,"symbolsTime":"1 mins."},"categories":[{"name":"iOS","slug":"iOS","count":36,"path":"api/categories/iOS.json"}],"tags":[{"name":"Alipay","slug":"Alipay","count":2,"path":"api/tags/Alipay.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%90%9C%E7%B4%A2SDK%E5%9D%91\"><span class=\"toc-text\">搜索SDK坑</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%BE%E5%88%B0%E5%9D%91%E7%9A%84%E5%8E%9F%E5%9B%A0\"><span class=\"toc-text\">找到坑的原因</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BD%E5%9D%91\"><span class=\"toc-text\">下载坑</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E5%9D%91\"><span class=\"toc-text\">支付宝支付坑</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F%E5%9D%91\"><span class=\"toc-text\">注意坑</span></a></li></ol>","author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"碎碎念在12月20日","uid":"a42d3adbf958e09582eb414303f905b7","slug":"碎碎念在12月20日","date":"2015-12-20T13:12:53.000Z","updated":"2020-03-11T15:28:05.000Z","comments":true,"path":"api/articles/碎碎念在12月20日.json","keywords":null,"cover":null,"text":"临近过年，琐事也多了起来。各种朋友同学亲戚结婚 关于介绍iOS项目结构的文章http://limboy.me/ios/2013/09/23/build-ios-application.html http://www.samirchen.com/ios-project-struct...","link":"","photos":[],"count_time":{"symbolsCount":371,"symbolsTime":"1 mins."},"categories":[{"name":"碎碎念","slug":"碎碎念","count":13,"path":"api/categories/碎碎念.json"}],"tags":[],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}},"next_post":{"title":"Git忽略UserInterfaceState.xcuserstate文件","uid":"b97865038b955c76e71ff4a643ed3306","slug":"Git忽略UserInterfaceState-xcuserstate文件","date":"2015-12-15T03:28:52.000Z","updated":"2020-03-28T15:59:07.000Z","comments":true,"path":"api/articles/Git忽略UserInterfaceState-xcuserstate文件.json","keywords":null,"cover":[],"text":"关于UserInterfaceState.xcuserstate文件路径：ProjectFolder.xcodeproj/project.xcworkspace/xcuserdata/myUserName.xcuserdatad/UserInterfaceState.xcuser...","link":"","photos":[],"count_time":{"symbolsCount":623,"symbolsTime":"1 mins."},"categories":[{"name":"Git","slug":"Git","count":1,"path":"api/categories/Git.json"}],"tags":[{"name":"Xcode","slug":"Xcode","count":6,"path":"api/tags/Xcode.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}}}