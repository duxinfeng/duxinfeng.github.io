{"title":"DTCoreText使用总结","uid":"3d903fd1221999daa3758c4571ca9b00","slug":"DTCoreText使用总结","date":"2017-08-02T05:14:31.000Z","updated":"2020-03-11T12:55:38.000Z","comments":true,"path":"api/articles/DTCoreText使用总结.json","keywords":null,"cover":"http://qiniu.niuxtech.cn/QQ20171017-161311.png","content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>总结在项目中使用DTCoreText时，遇到一些问题和解决方法。</p></blockquote>\n<h3 id=\"安装运行\"><a href=\"#安装运行\" class=\"headerlink\" title=\"安装运行\"></a>安装运行</h3><p>GitHub 地址: <a href=\"https://github.com/Cocoanetics/DTCoreText\">https://github.com/Cocoanetics/DTCoreText</a></p>\n<p>官方文档: <a href=\"https://docs.cocoanetics.com/DTCoreText\">https://docs.cocoanetics.com/DTCoreText</a></p>\n<p>直接下载下的DTCoreText是不能直接运行的，会报一些头文件找不到的错’import &lt;DTFoundation/DTWeakSupport.h&gt; file not found.’原因是DTCoreText依赖第DTFoundation这个库，所以需要执行一些操作安装DTFoundation库。</p>\n<h5 id=\"在本地新建一个文件DTCoreText，打开终端进入这个这个文件下\"><a href=\"#在本地新建一个文件DTCoreText，打开终端进入这个这个文件下\" class=\"headerlink\" title=\"在本地新建一个文件DTCoreText，打开终端进入这个这个文件下\"></a>在本地新建一个文件DTCoreText，打开终端进入这个这个文件下</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">git clone git@github.com:Cocoanetics&#x2F;DTCoreText.git\n\ngit submodule init\n\ngit submodule update\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>然后运行DTCoreText.xcodeproj,在使用的时候建议使用<code>pod &#39;DTCoreText</code> 来安装。</p>\n<h5 id=\"直接在终端上执行：\"><a href=\"#直接在终端上执行：\" class=\"headerlink\" title=\"直接在终端上执行：\"></a>直接在终端上执行：</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">git clone --recursive https:&#x2F;&#x2F;github.com&#x2F;Cocoanetics&#x2F;DTCoreText.git Externals&#x2F;DTCoreText<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>安装文档：<a href=\"https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html\">https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html</a></p>\n<h3 id=\"显示文本\"><a href=\"#显示文本\" class=\"headerlink\" title=\"显示文本\"></a>显示文本</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">NSString *html &#x3D; @&quot;&lt;p&gt;这是一段使用&lt;strong&gt;DTCoreText&lt;&#x2F;strong&gt;显示的富文本&lt;&#x2F;p&gt;&lt;p&gt;这是第二段使用&lt;span style&#x3D;\\&quot;text-decoration:underline;\\&quot;&gt;DTCoreText&lt;&#x2F;span&gt;显示的富文本&lt;&#x2F;p&gt;&quot;;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>现在我们拿到一段html字符串，转换成NSAttributedString对象，然后使用DTCoreText的DTAttributedLabel进行显示。<br>DTCoreText 目前没有设置段间距的属性，只能丢到源码里，然后去解析这些属性，NSString *tag = @”<style>p{margin:2 auto}</style>“; 放到前面，设置段间距。这里涉及到一些html的东西。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">- (NSAttributedString *)configAttributedString:(NSString *)html\n&#123;\n    NSString *tag &#x3D; @&quot;&lt;style&gt;p&#123;margin:2 auto&#125;&lt;&#x2F;style&gt;&quot;; &#x2F;&#x2F; 配置段间距\n    if (![html containsString:tag]) &#123;\n        html &#x3D; [tag stringByAppendingString:html];\n    &#125;\n    \n    NSDictionary *options &#x3D; @&#123; DTDefaultFontSize:[NSNumber numberWithFloat:kFontSize(48)], &#x2F;&#x2F; 字体大小\n                               DTDefaultLineHeightMultiplier:[NSNumber numberWithFloat:1.5], &#x2F;&#x2F;行间距\n                               DTDefaultFontName:@&quot;Helvetica&quot;&#125;; &#x2F;&#x2F; 设置字体\n    \n    NSData *data &#x3D; [html dataUsingEncoding:NSUTF8StringEncoding];\n    return [[NSAttributedString alloc] initWithHTMLData:data options:options documentAttributes:NULL];\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<p>获取渲染后的大小</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">NSAttributedString *attributedString &#x3D; ...\nDTCoreTextLayouter *layouter &#x3D; [[DTCoreTextLayouter alloc] initWithAttributedString:attributedString];\nCGRect maxRect &#x3D; CGRectMake(10, 20, CGFLOAT_WIDTH_UNKNOWN, CGFLOAT_HEIGHT_UNKNOWN);\nNSRange entireString &#x3D; NSMakeRange(0, [attributedString length]);\nDTCoreTextLayoutFrame *layoutFrame &#x3D; [layouter layoutFrameWithRect:maxRect range:entireString];\n\nCGSize sizeNeeded &#x3D; [layoutFrame frame].size;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"显示图片和Gif动图\"><a href=\"#显示图片和Gif动图\" class=\"headerlink\" title=\"显示图片和Gif动图\"></a>显示图片和Gif动图</h3><p>如果是一个本地html文件，里面的图片也是本地展示是没问题，如果远程图片这个时候需要更多一些操作了。在解析到&lt;img&gt;&lt;/img&gt;标签的时候插入一个占位符，然后在代理方法里面解析获取，通过封装的DTLazyImageView图片来显示</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">NSString *html &#x3D; @&quot;&lt;p&gt;这是一段使用&lt;strong&gt;DTCoreText&lt;&#x2F;strong&gt;显示的富文本&lt;&#x2F;p&gt;&lt;p&gt;这是第二段使用&lt;span style&#x3D;\\&quot;text-decoration:underline;\\&quot;&gt;DTCoreText&lt;&#x2F;span&gt;显示的富文本&lt;&#x2F;p&gt;&lt;p&gt;&lt;img src&#x3D;\\&quot;http:&#x2F;&#x2F;7xj2sw.com1.z0.glb.clouddn.com&#x2F;QQ20171013-223759@2x.png\\&quot; _src&#x3D;\\&quot;http:&#x2F;&#x2F;7xj2sw.com1.z0.glb.clouddn.com&#x2F;QQ20171013-223759@2x.png\\&quot; style&#x3D;\\&quot;width:200px;height:100px;\\&quot;&#x2F;&gt;&lt;&#x2F;p&gt;&quot;;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">- (UIView *)attributedTextContentView:(DTAttributedTextContentView *)attributedTextContentView viewForAttachment:(DTTextAttachment *)attachment frame:(CGRect)frame\n&#123;\n    \n    if([attachment isKindOfClass:[DTImageTextAttachment class]])\n    &#123;\n        NSString *imageURL &#x3D; [NSString stringWithFormat:@&quot;%@&quot;, attachment.contentURL];\n        \n        DTLazyImageView *imageView &#x3D; [[DTLazyImageView alloc] initWithFrame:frame];\n        imageView.delegate &#x3D; self;\n        imageView.contentMode &#x3D; UIViewContentModeScaleAspectFit;\n        imageView.image &#x3D; [(DTImageTextAttachment *)attachment image];\n        imageView.url &#x3D; attachment.contentURL;\n        \n        if ([imageURL containsString:@&quot;gif&quot;]) &#123;\n            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;\n                NSData *gifData &#x3D; [NSData dataWithContentsOfURL:attachment.contentURL];\n                dispatch_async(dispatch_get_main_queue(), ^&#123;\n                    imageView.image &#x3D; DTAnimatedGIFFromData(gifData);\n                &#125;);\n            &#125;);\n        &#125;\n        \n        return imageView;\n        \n    &#125;\n &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>DTLazyImageView 异步下载这张图片，如果是一张gif图就不会动，需要下载完这个Gif的数据之后再做一次转换赋值。</p>\n<p>如果上传的图片属性里面没有宽高属性<code>style=\\&quot;width:200px;height:100px;</code>，是显示不出来的。官方给的一个解决方案是在DTLazyImageView的代理方法 - (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size 里面获取它的originalSize是否为CGSizeZero，然后重新赋值，刷新布局。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">- (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size &#123;\n    NSURL *url &#x3D; lazyImageView.url;\n    CGSize imageSize &#x3D; size;\n    \n    NSPredicate *pred &#x3D; [NSPredicate predicateWithFormat:@&quot;contentURL &#x3D;&#x3D; %@&quot;, url];\n    \n    BOOL didUpdate &#x3D; NO;\n    \n    &#x2F;&#x2F; update all attachments that match this URL (possibly multiple images with same size)\n    for (DTTextAttachment *oneAttachment in [self.layoutFrame textAttachmentsWithPredicate:pred])\n    &#123;\n        &#x2F;&#x2F; update attachments that have no original size, that also sets the display size\n        if (CGSizeEqualToSize(oneAttachment.originalSize, CGSizeZero))\n        &#123;\n            oneAttachment.originalSize &#x3D; imageSize;\n            \n            didUpdate &#x3D; YES;\n        &#125;\n    &#125;\n    \n    if (didUpdate)\n    &#123;\n        &#x2F;&#x2F; do it on next run loop because a layout pass might be going on\n         self.layouter &#x3D; nil;\n         [self relayoutText];\n    &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>但是展示View大小是有限制的，这个时候绘制的图片超出可视区域。目前想到一个解决方案是在- (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size 难道图片的size之后平凑出style的宽高属性。然后在重新初始化加载这个html字符串。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x2F;&#x2F; 字符串中一些图片没有宽高，需要这里拿到宽高后再去reload\n- (void)configNoSizeImageView:(NSString *)url size:(CGSize)size\n&#123;\n\n    NSString *imageInfo &#x3D; [NSString stringWithFormat:@&quot;_src&#x3D;\\&quot;%@\\&quot;&quot;,url];\n    NSString *sizeString &#x3D; [NSString stringWithFormat:@&quot; style&#x3D;\\&quot;width: %.fpx; height: %.0fpx;\\&quot;&quot;,size.width,size.height];\n    NSString *newImageInfo &#x3D; [NSString stringWithFormat:@&quot;_src&#x3D;\\&quot;%@\\&quot;%@&quot;,url,sizeString];\n    \n    if ([self.html containsString:imageInfo] &amp;&amp; !self.isClose) &#123;\n        \n        NSString *newHtml &#x3D; [self.html stringByReplacingOccurrencesOfString:imageInfo withString:newImageInfo];\n        \n        &#x2F;&#x2F; reload newHtml\n    &#125;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>至于为什么会有 src 和 _scr ?<br>使用了百度开源了一个富文本编辑器UEditor<a href=\"http://ueditor.baidu.com/website/onlinedemo.html\">http://ueditor.baidu.com/website/onlinedemo.html</a> 传图片的时候就会有多个 _scr,属性也都在这里面，所以就追加到_scr里面。</p>\n<h3 id=\"显示自定义控件\"><a href=\"#显示自定义控件\" class=\"headerlink\" title=\"显示自定义控件\"></a>显示自定义控件</h3><p>在展示自定义控件里展示输入框和数学公式</p>\n<h4 id=\"显示公式\"><a href=\"#显示公式\" class=\"headerlink\" title=\"显示公式\"></a>显示公式</h4><pre><code>[DTTextAttachment registerClass:[DTObjectTextAttachment class] forTagName:@&quot;object&quot;];\n</code></pre>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&lt;p&gt;\n    &lt;span class&#x3D;&quot;mathquill-embedded-latex&quot; style&#x3D;&quot;width: 26px; height: 41px;&quot;&gt;\\frac&#123;2&#125;&#123;3&#125;&lt;&#x2F;span&gt;是一个分数，1 小于&lt;span class&#x3D;&quot;mathquill-embedded-latex&quot; style&#x3D;&quot;width: 41px; height: 28px;&quot;&gt;\\sqrt&#123;2&#125;&lt;&#x2F;span&gt;。\n&lt;&#x2F;p&gt;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>我想自定定义控件的tagname为“mathquill-embedded-latex”，并不可以但是替换成“object”就可以，这里使用正则表达式替换mathquill-embedded-latex为object。然后拿到文本使用第三方库iosMath<a href=\"https://github.com/kostub/iosMath\">https://github.com/kostub/iosMath</a>显示公式。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x2F;&#x2F; 公式需要自定义标签，如果包含数学公式标签才处理，不需要每次正则表达式去匹配\n- (NSString *)configMathlatex:(NSString *)html\n&#123;\n    NSString *string &#x3D; html;\n\n    if ([string containsString:@&quot;&lt;span class&#x3D;\\&quot;mathquill-embedded-latex\\&quot;&quot;]) &#123;\n    \n        NSError *error &#x3D; nil;\n        NSString *pattern &#x3D; @&quot;&lt;span class&#x3D;\\&quot;mathquill-embedded-latex\\&quot; style&#x3D;.*?&gt;.*?&lt;&#x2F;span&gt;&quot;;\n        NSRegularExpression *regex &#x3D; [NSRegularExpression regularExpressionWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:&amp;error];\n        NSArray *array &#x3D; [regex matchesInString:string options:NSMatchingReportProgress range:NSMakeRange(0, [string length])];\n       \n        for (NSInteger i &#x3D; array.count-1; i&gt;&#x3D;0; i--) &#123;\n           NSTextCheckingResult *result &#x3D; array[i];\n            NSString *latextext &#x3D; [string substringWithRange:result.range]; &#x2F;&#x2F; 需要变更的字符串\n            [string deleteCharactersInRange:result.range];\n            NSString *objectText &#x3D; [latextext stringByReplacingOccurrencesOfString:@&quot;span&quot; withString:@&quot;object&quot;];\n            [string insertString:objectText atIndex:result.range.location];\n        &#125;\n        \n    &#125;\n\n    return string;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"显示输入框\"><a href=\"#显示输入框\" class=\"headerlink\" title=\"显示输入框\"></a>显示输入框</h4><pre><code>[DTTextAttachment registerClass:[DTObjectTextAttachment class] forTagName:@&quot;input&quot;];\n</code></pre>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">- (UIView *)attributedTextContentView:(DTAttributedTextContentView *)attributedTextContentView viewForAttachment:(DTTextAttachment *)attachment frame:(CGRect)frame\n&#123;\n if ([attachment isKindOfClass:[DTObjectTextAttachment class]])&#123;\n        NSString *className &#x3D; [attachment.attributes objectForKey:@&quot;class&quot;];\n        if ([className isEqualToString:@&quot;mathquill-embedded-latex&quot;]) &#123; &#x2F;&#x2F; 公式\n            attachment.verticalAlignment &#x3D; DTTextAttachmentVerticalAlignmentCenter;\n            DTObjectTextAttachment *element &#x3D; (DTObjectTextAttachment *)attachment;\n            NSString *content;\n            for (DTHTMLElement *oneChildElement in element.childNodes)\n            &#123;\n                content &#x3D; oneChildElement.text;\n                MTMathUILabel* label &#x3D; [[MTMathUILabel alloc] init];\n                label.textAlignment &#x3D; kMTTextAlignmentCenter;\n                label.frame &#x3D; frame;\n                label.latex &#x3D; content;\n                label.fontSize &#x3D; 16;\n                return label;\n            &#125;\n        &#125;\n        \n        NSString *type &#x3D; [attachment.attributes objectForKey:@&quot;type&quot;];\n        if ([type isEqualToString:@&quot;text&quot;]) &#123; &#x2F;&#x2F; 文本输入框\n            UITextField *textField &#x3D; self.textFieldArray[tfID];\n            textField.frame &#x3D; frame;\n            textField.contentVerticalAlignment&#x3D;UIControlContentVerticalAlignmentCenter;\n            textField.layer.cornerRadius &#x3D; 6;\n            textField.delegate  &#x3D; self;\n            textField.leftViewMode &#x3D; UITextFieldViewModeAlways;\n            textField.rightViewMode &#x3D; UITextFieldViewModeAlways;\n            [textField setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];\n            return textField;\n        &#125;\n        \n    &#125;\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<p>参考资料：</p>\n<ol>\n<li><a href=\"https://docs.cocoanetics.com/DTCoreText\">https://docs.cocoanetics.com/DTCoreText</a></li>\n<li><a href=\"http://blog.cnbang.net/tech/2630\">http://blog.cnbang.net/tech/2630</a></li>\n<li><a href=\"http://blog.cnbang.net/tech/2729\">http://blog.cnbang.net/tech/2729</a></li>\n<li><a href=\"http://www.jianshu.com/p/9f5ac4d47ef4\">http://www.jianshu.com/p/9f5ac4d47ef4</a></li>\n</ol>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p> 当你获得的越多，你就会越温柔，不会为一点失去就气得暴跳如雷，也不会因为别人的否定就变得愤怒又消极。好的成长，就该是让人变得越来越温柔。</p></blockquote>\n","text":" 总结在项目中使用DTCoreText时，遇到一些问题和解决方法。 安装运行GitHub 地址: https://github.com/Cocoanetics/DTCoreText 官方文档: https://docs.cocoanetics.com/DTCoreText 直接下...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"iOS","slug":"iOS","count":37,"path":"api/categories/iOS.json"}],"tags":[{"name":"DTCoreText","slug":"DTCoreText","count":1,"path":"api/tags/DTCoreText.json"},{"name":"富文本","slug":"富文本","count":1,"path":"api/tags/富文本.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">安装运行</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E5%9C%A8%E6%9C%AC%E5%9C%B0%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6DTCoreText%EF%BC%8C%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF%E8%BF%9B%E5%85%A5%E8%BF%99%E4%B8%AA%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%8B\"><span class=\"toc-text\">在本地新建一个文件DTCoreText，打开终端进入这个这个文件下</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E7%9B%B4%E6%8E%A5%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8A%E6%89%A7%E8%A1%8C%EF%BC%9A\"><span class=\"toc-text\">直接在终端上执行：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E6%96%87%E6%9C%AC\"><span class=\"toc-text\">显示文本</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E5%92%8CGif%E5%8A%A8%E5%9B%BE\"><span class=\"toc-text\">显示图片和Gif动图</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6\"><span class=\"toc-text\">显示自定义控件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E5%85%AC%E5%BC%8F\"><span class=\"toc-text\">显示公式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%98%BE%E7%A4%BA%E8%BE%93%E5%85%A5%E6%A1%86\"><span class=\"toc-text\">显示输入框</span></a></li></ol></li></ol>","author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"error: lipo: can't write to output file","uid":"27032935d320bfa0f95c0911960ccc4a","slug":"error-lipo-can-t-write-to-output-file","date":"2017-08-05T03:13:50.000Z","updated":"2020-03-28T15:45:29.000Z","comments":true,"path":"api/articles/error-lipo-can-t-write-to-output-file.json","keywords":null,"cover":null,"text":"对于128G 空间也是够了，随着配置各种开发环境的增多，经常编译打包的时候提示数据不能写入。有时候报如下错： error: lipo: can&#39;t write to output file: /Users/用户名/Library/Developer/Xcode/Deriv...","link":"","photos":[],"count_time":{"symbolsCount":418,"symbolsTime":"1 mins."},"categories":[{"name":"iOS","slug":"iOS","count":37,"path":"api/categories/iOS.json"}],"tags":[{"name":"打包","slug":"打包","count":3,"path":"api/tags/打包.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}},"next_post":{"title":"开放平台汇总","uid":"4eab2cb01c9458c9ded7713c877ab7dc","slug":"开放平台汇总","date":"2017-06-16T06:06:43.000Z","updated":"2017-08-05T03:28:07.000Z","comments":true,"path":"api/articles/开放平台汇总.json","keywords":null,"cover":null,"text":"开放平台优酷开放平台：http://open.youku.com 优酷视频云：http://cloud.youku.com 爱奇艺开放平台：http://open.iqiyi.com 讯飞开放平台：http://www.xfyun.cn 微信开放平台：https://open.w...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"工具","slug":"工具","count":10,"path":"api/categories/工具.json"}],"tags":[{"name":"开放平台","slug":"开放平台","count":1,"path":"api/tags/开放平台.json"},{"name":"文档","slug":"文档","count":1,"path":"api/tags/文档.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}}}