{"title":"WKWebView与WebViewJavascriptBridge踩到的坑","uid":"178c5f813af8d418996b14adcdaa99b2","slug":"WKWebView与WebViewJavascriptBridge踩到的坑","date":"2018-05-03T02:03:57.000Z","updated":"2020-03-28T15:56:48.000Z","comments":true,"path":"api/articles/WKWebView与WebViewJavascriptBridge踩到的坑.json","keywords":null,"cover":null,"content":"<p><strong>WKWebview Delegate 不执行</strong></p>\n<p>需要设置 [self.bridge setWebViewDelegate:self];</p>\n<p><strong>调试时网页端alert()无法弹出</strong></p>\n<p>需要手动去WKUIDelegate三个方法中实现</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\n#pragma mark -- WKUIDelegate\n&#x2F;&#x2F; 显示一个按钮。点击后调用completionHandler回调\n- (void)webView:(WKWebView *)webView runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(void))completionHandler&#123;\n    \n    UIAlertController *alertController &#x3D; [UIAlertController alertControllerWithTitle:message message:nil preferredStyle:UIAlertControllerStyleAlert];\n    [alertController addAction:[UIAlertAction actionWithTitle:@&quot;确定&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123;\n        \n        completionHandler();\n    &#125;]];\n    [self presentViewController:alertController animated:YES completion:nil];\n&#125;\n\n&#x2F;&#x2F; 显示两个按钮，通过completionHandler回调判断用户点击的确定还是取消按钮\n- (void)webView:(WKWebView *)webView runJavaScriptConfirmPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(BOOL))completionHandler&#123;\n    \n    UIAlertController *alertController &#x3D; [UIAlertController alertControllerWithTitle:message message:nil preferredStyle:UIAlertControllerStyleAlert];\n    [alertController addAction:[UIAlertAction actionWithTitle:@&quot;确定&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123;\n        \n        completionHandler(YES);\n    &#125;]];\n    [alertController addAction:[UIAlertAction actionWithTitle:@&quot;取消&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123;\n        \n        completionHandler(NO);\n    &#125;]];\n    [self presentViewController:alertController animated:YES completion:nil];\n    \n&#125;\n\n&#x2F;&#x2F; 显示一个带有输入框和一个确定按钮的，通过completionHandler回调用户输入的内容\n- (void)webView:(WKWebView *)webView runJavaScriptTextInputPanelWithPrompt:(NSString *)prompt defaultText:(NSString *)defaultText initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(NSString * _Nullable))completionHandler&#123;\n    \n    UIAlertController *alertController &#x3D; [UIAlertController alertControllerWithTitle:@&quot;&quot; message:nil preferredStyle:UIAlertControllerStyleAlert];\n    [alertController addTextFieldWithConfigurationHandler:^(UITextField * _Nonnull textField) &#123;\n        \n    &#125;];\n    [alertController addAction:[UIAlertAction actionWithTitle:@&quot;确定&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123;\n        \n        completionHandler(alertController.textFields.lastObject.text);\n    &#125;]];\n    [self presentViewController:alertController animated:YES completion:nil];\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","text":"WKWebview Delegate 不执行 需要设置 [self.bridge setWebViewDelegate:self]; 调试时网页端alert()无法弹出 需要手动去WKUIDelegate三个方法中实现 #pragma mark -- WKUIDelegate &...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"iOS","slug":"iOS","count":36,"path":"api/categories/iOS.json"}],"tags":[{"name":"WKWebView","slug":"WKWebView","count":2,"path":"api/tags/WKWebView.json"},{"name":"WebViewJavascriptBridge","slug":"WebViewJavascriptBridge","count":1,"path":"api/tags/WebViewJavascriptBridge.json"}],"toc":"","author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Xcode 10  Multiple commands produce 错误","uid":"9ac5b96955bc8da8b3ddc88f8d47342d","slug":"Xcode-10-Multiple-commands-produce-错误","date":"2018-10-08T07:03:49.000Z","updated":"2020-03-11T15:19:45.000Z","comments":true,"path":"api/articles/Xcode-10-Multiple-commands-produce-错误.json","keywords":null,"cover":null,"text":"部分旧的工程用Xcode 10打开打开的时候报如下错： Build system information error: Multiple commands produce &#39;&#x2F;Users&#x2F;xxx&#x2F;Library&#x2F;Developer&...","link":"","photos":[],"count_time":{"symbolsCount":869,"symbolsTime":"1 mins."},"categories":[{"name":"iOS","slug":"iOS","count":36,"path":"api/categories/iOS.json"}],"tags":[{"name":"Xcode10","slug":"Xcode10","count":2,"path":"api/tags/Xcode10.json"},{"name":"Error","slug":"Error","count":1,"path":"api/tags/Error.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}},"next_post":{"title":"获取Images.xcassets启动图、Images.xcassets Icon","uid":"03b9660078dfc9e29b336cb5a6e44fe3","slug":"获取Images-xcassets启动图、Images-xcassets-Icon","date":"2018-04-09T08:15:35.000Z","updated":"2020-03-28T15:54:25.000Z","comments":true,"path":"api/articles/获取Images-xcassets启动图、Images-xcassets-Icon.json","keywords":null,"cover":null,"text":"获取Images.xcassets Icon文件NSDictionary *infoPlist &#x3D; [[NSBundle mainBundle] infoDictionary]; NSString *icon &#x3D; [[infoPlist valueForKey...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"iOS","slug":"iOS","count":36,"path":"api/categories/iOS.json"}],"tags":[{"name":"Images.xcassets","slug":"Images-xcassets","count":1,"path":"api/tags/Images-xcassets.json"},{"name":"启动图","slug":"启动图","count":1,"path":"api/tags/启动图.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}}}