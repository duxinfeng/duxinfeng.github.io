{"title":"Mantle的使用","uid":"531983b175d1a941a4658cbd55147759","slug":"Mantle的使用","date":"2015-07-25T16:02:12.000Z","updated":"2020-03-11T12:59:55.000Z","comments":true,"path":"api/articles/Mantle的使用.json","keywords":null,"cover":null,"content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>关于Mantle</p></blockquote>\n<p>项目地址：<a href=\"https://github.com/Mantle/Mantle\">https://github.com/Mantle/Mantle</a></p>\n<p>Mantle介绍：<br>Mantle 是Github团队开源出来的一项能够简化Cocoa 和 Cocoa Touch 应用的Model层，避免每次重写<code>-(instancetype)initWithAttributes:(NSDictionary *)attributes; </code>实例方法，并且进行类似<code>[[[attributes objectForKey:@&quot;key&quot;] valueForKeyPath:@&quot;key&quot;] integerValue]</code> 的取值操作。</p>\n<p>###项目中服务器端返回的内容，我需要进行自己的一些处理数据，以及处理数据遇到的问题：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&#123;\n            &quot;count&quot;: 63778,\n            &quot;type&quot;: &quot;0&quot;,\n            &quot;yuwen_edition&quot;: &quot;人教版|北师大版|沪教版|浙教版|苏教新版|S版&quot;,\n            &quot;title&quot;: &quot;左手边的织女，你在哪里？&quot;,\n            &quot;url&quot;: &quot;&quot;,\n            &quot;qid&quot;: &quot;13660|13652|13663|13676|13668&quot;,\n            &quot;cover&quot;: &quot;http:&#x2F;&#x2F;file.haojiazhang123.com&#x2F;static&#x2F;server&#x2F;flow&#x2F;201508&#x2F;905fe1b2-4716-11e5-8074-00163e000ba7.jpg&quot;,\n            &quot;grade&quot;: &quot;学龄前|一年级|二年级|三年级|四年级|五年级|六年级|初中&quot;,\n            &quot;label&quot;: &quot;科学小达人&quot;,\n            &quot;subtype&quot;: null,\n            &quot;label_color&quot;: &quot;blue&quot;,\n            &quot;location&quot;: &quot;全国通用&quot;,\n            &quot;push_date&quot;: &quot;2015-08-21 00:00&quot;,\n            &quot;time&quot;: &quot;2015-08-20T16:36:34&quot;,\n            &quot;shuxue_edition&quot;: &quot;人教版|北师大版|沪教版|浙教版|苏教新版|S版&quot;,\n            &quot;share_count&quot;: 154,\n            &quot;has_coin&quot;: &quot;0&quot;,\n            &quot;id&quot;: 516\n        &#125;,\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<p>###BOOL型数据处理</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\n+ (NSValueTransformer *)has_coinJSONTransformer\n&#123;\n   NSDictionary *dictionary &#x3D; @&#123;@&quot;0&quot;:@(NO),\n                                @&quot;1&quot;:@(YES)&#125;;\n   \n   return [NSValueTransformer mtl_valueMappingTransformerWithDictionary:dictionary];\n   \n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<p>###处理枚举类型数据</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">+ (NSValueTransformer *)typeJSONTransformer&#123;\n    \n    NSDictionary *dictionary &#x3D; @&#123;@&quot;0&quot;:@(ContentSubjectType),\n                                 @&quot;1&quot;:@(ContentLinkType)&#125;;\n  \n    return [NSValueTransformer mtl_valueMappingTransformerWithDictionary:dictionary];\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>###转成URL对象</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">+ (NSValueTransformer *)urlJSONTransformer&#123;\n    \n    return [NSValueTransformer valueTransformerForName:MTLURLValueTransformerName];\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>#####【需要注意】<br>如果后台返回的字符串中带有<code>中文</code>,需要让后台做一下转码，不然程序会崩。<br>以为这是Mantle的一个bug，官方给出回答让转码处理，还是转码处理吧。或者就不要转成URL对象了，还是有String类型进行接收妥当。<br><a href=\"https://github.com/Mantle/Mantle/issues/603\">https://github.com/Mantle/Mantle/issues/603</a></p>\n<p>###空对象处理<br>遇到这样一个空对象处理问题，描述和处理方法已在这个issue记录 <a href=\"https://github.com/Mantle/Mantle/issues/595\">https://github.com/Mantle/Mantle/issues/595</a></p>\n<p>参考内容：<a href=\"http://bawn.github.io/ios/2014/12/11/Mantle.html\">http://bawn.github.io/ios/2014/12/11/Mantle.html</a></p>\n<p>###处理BOOL类型<br><a href=\"http://www.objc.at/mantle\">http://www.objc.at/mantle</a><br><a href=\"https://github.com/Mantle/Mantle/issues/145\">https://github.com/Mantle/Mantle/issues/145</a><br><a href=\"http://stackoverflow.com/questions/24670702/mantle-convert-0-and-1-to-bool-automatically\">http://stackoverflow.com/questions/24670702/mantle-convert-0-and-1-to-bool-automatically</a></p>\n<hr>\n<p>没写完，希望有时间好好梳理一下，然后整理出来</p>\n","text":" 关于Mantle 项目地址：https://github.com/Mantle/Mantle Mantle介绍：Mantle 是Github团队开源出来的一项能够简化Cocoa 和 Cocoa Touch 应用的Model层，避免每次重写-(instancetype)initW...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"iOS","slug":"iOS","count":37,"path":"api/categories/iOS.json"}],"tags":[{"name":"Mantle","slug":"Mantle","count":2,"path":"api/tags/Mantle.json"}],"toc":"","author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Xcode 6.4 Build error 没有任何错误issues","uid":"7f5ce444661ab21418e622d405e2364d","slug":"Xcode-6-4-Build-error-没有任何错误issues","date":"2015-07-27T08:21:51.000Z","updated":"2017-04-27T13:02:12.000Z","comments":true,"path":"api/articles/Xcode-6-4-Build-error-没有任何错误issues.json","keywords":null,"cover":[],"text":"今天遇到一个很奇怪的问题，我修改了一个变量，然后Xcode一直Build Error ,没有任何提示。尝试Clean、重启XCode、重启Mac都这样，然后在网上找到了一个12年的Blog，尝试了一下解决了。 因为在其他地方也有使用这个变量，我改动这个变量名称后，忘记修改，然后x...","link":"","photos":[],"count_time":{"symbolsCount":218,"symbolsTime":"1 mins."},"categories":[{"name":"工具","slug":"工具","count":10,"path":"api/categories/工具.json"}],"tags":[{"name":"Xcode","slug":"Xcode","count":6,"path":"api/tags/Xcode.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}},"next_post":{"title":"iOS开源App整理","uid":"b84327d37705f1de265729e915a9e41a","slug":"iOS开源App整理","date":"2015-07-14T05:09:48.000Z","updated":"2017-05-01T15:43:00.000Z","comments":true,"path":"api/articles/iOS开源App整理.json","keywords":null,"cover":null,"text":"有时候在逛Weibo、Github的时候看到一些最近开源或者持续更新的iOS项目源码，大部分都已经上线，在这篇Blog里作了整理（排名不分先后，按照发现时间排序）。 开源中国开源中国社区iPhone客户端。 Appstore 下载地址：https://itunes.apple.c...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"iOS","slug":"iOS","count":37,"path":"api/categories/iOS.json"}],"tags":[{"name":"App","slug":"App","count":1,"path":"api/tags/App.json"},{"name":"源码","slug":"源码","count":2,"path":"api/tags/源码.json"}],"author":{"name":"新风作浪","slug":"blog-author","avatar":"http://qiniu.niuxtech.cn/avatar.png","link":"/","description":"专注于你能控制的","socials":{"github":"https://github.com/duxinfeng","twitter":"https://twitter.com/iduxinfeng","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/duxinfeng2010","juejin":"","customs":{}}}}}